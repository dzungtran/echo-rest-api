<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="419px" preserveAspectRatio="none" style="width:335px;height:419px;background:#FFFFFF;" version="1.1" viewBox="0 0 335 419" width="335px" zoomAndPan="magnify"><defs><filter height="300%" id="f10m8zttk58xp5" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="187" x="73" y="27.4023">User registration flow</text><ellipse cx="167.75" cy="41.1992" fill="#000000" filter="url(#f10m8zttk58xp5)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f10m8zttk58xp5)" height="48.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="159" x="88.25" y="71.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="98.25" y="92.8008">User who completed</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="139" x="98.25" y="106.9336">registration on Kratos UI</text><rect fill="#FEFECE" filter="url(#f10m8zttk58xp5)" height="48.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="218" x="58.75" y="139.4648"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="198" x="68.75" y="161.0664">Kratos server will send a webhook</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="11" x="68.75" y="175.1992">to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="80" x="83.75" y="175.1992">wepass-core</text><rect fill="#FFFFFF" filter="url(#f10m8zttk58xp5)" height="162.6641" style="stroke:#000000;stroke-width:2.0;" width="307" x="11" y="197.7305"/><path d="M207,197.7305 L207,207.2188 L197,217.2188 L11,217.2188 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="65" x="14" y="212.2656">webhook</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="83" y="212.2656">AfterRegistration</text><polygon fill="#FEFECE" filter="url(#f10m8zttk58xp5)" points="128.25,234.2188,207.25,234.2188,219.25,247.1738,207.25,260.1289,128.25,260.1289,116.25,247.1738,128.25,234.2188" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="60" x="128.25" y="244.8535">Check user</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="79" x="128.25" y="257.8086">email existing?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="98.25" y="244.8535">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="219.25" y="244.8535">no</text><rect fill="#FEFECE" filter="url(#f10m8zttk58xp5)" height="48.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="138" x="23" y="270.1289"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="33" y="291.7305">Update user code to</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="70" x="33" y="305.8633">the new one</text><rect fill="#FEFECE" filter="url(#f10m8zttk58xp5)" height="48.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="125" x="181" y="270.1289"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="105" x="191" y="291.7305">Create a new user</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="191" y="305.8633">with email</text><polygon fill="#FEFECE" filter="url(#f10m8zttk58xp5)" points="167.75,324.3945,179.75,336.3945,167.75,348.3945,155.75,336.3945,167.75,324.3945" style="stroke:#A80036;stroke-width:1.5;"/><ellipse cx="167.75" cy="391.3945" fill="#FFFFFF" filter="url(#f10m8zttk58xp5)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="167.75" cy="391.3945" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="167.75" x2="167.75" y1="51.1992" y2="71.1992"/><polygon fill="#A80036" points="163.75,61.1992,167.75,71.1992,171.75,61.1992,167.75,65.1992" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="167.75" x2="167.75" y1="119.4648" y2="139.4648"/><polygon fill="#A80036" points="163.75,129.4648,167.75,139.4648,171.75,129.4648,167.75,133.4648" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="116.25" x2="92" y1="247.1738" y2="247.1738"/><line style="stroke:#A80036;stroke-width:1.5;" x1="92" x2="92" y1="247.1738" y2="270.1289"/><polygon fill="#A80036" points="88,260.1289,92,270.1289,96,260.1289,92,264.1289" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="219.25" x2="243.5" y1="247.1738" y2="247.1738"/><line style="stroke:#A80036;stroke-width:1.5;" x1="243.5" x2="243.5" y1="247.1738" y2="270.1289"/><polygon fill="#A80036" points="239.5,260.1289,243.5,270.1289,247.5,260.1289,243.5,264.1289" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="92" x2="92" y1="318.3945" y2="336.3945"/><line style="stroke:#A80036;stroke-width:1.5;" x1="92" x2="155.75" y1="336.3945" y2="336.3945"/><polygon fill="#A80036" points="145.75,332.3945,155.75,336.3945,145.75,340.3945,149.75,336.3945" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="243.5" x2="243.5" y1="318.3945" y2="336.3945"/><line style="stroke:#A80036;stroke-width:1.5;" x1="243.5" x2="179.75" y1="336.3945" y2="336.3945"/><polygon fill="#A80036" points="189.75,332.3945,179.75,336.3945,189.75,340.3945,185.75,336.3945" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="167.75" x2="167.75" y1="187.7305" y2="234.2188"/><polygon fill="#A80036" points="163.75,224.2188,167.75,234.2188,171.75,224.2188,167.75,228.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="167.75" x2="167.75" y1="348.3945" y2="380.3945"/><polygon fill="#A80036" points="163.75,370.3945,167.75,380.3945,171.75,370.3945,167.75,374.3945" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[3067c41fc93c910bfec5bafffef639e5]
@startuml user_regitration
title User registration flow
start
:User who completed 
registration on Kratos UI;
:Kratos server will send a webhook 
to **wepass-core**;
partition "**webhook** AfterRegistration" {
    if (Check user \nemail existing?) is (yes) then
        :Update user code to 
        the new one;
    else (no)
    :Create a new user 
    with email;
    endif
}
stop
@enduml

PlantUML version 1.2022.0(Tue Jan 11 23:16:42 ICT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: VN
--></g></svg>