<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="428px" preserveAspectRatio="none" style="width:351px;height:428px;background:#FFFFFF;" version="1.1" viewBox="0 0 351 428" width="351px" zoomAndPan="magnify"><defs/><g><rect height="26.2969" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="183" x="82.5" y="15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="173" x="87.5" y="32.9951">User registration flow</text><ellipse cx="179.25" cy="57.2969" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="173" x="92.75" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="128" x="102.75" y="108.4355">User who completed</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="153" x="102.75" y="122.4043">registration on Kratos UI</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="232" x="63.25" y="155.2344"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="212" x="73.25" y="176.373">Kratos server will send a webhook</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="13" x="73.25" y="190.3418">to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="54" x="90.25" y="190.3418">api-one</text><rect fill="none" height="161.8438" style="stroke:#000000;stroke-width:1.5;" width="329" x="11" y="213.1719"/><path d="M213,213.1719 L213,222.4688 L203,232.4688 L11,232.4688 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="73" x="14" y="227.167">webhook</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="91" y="227.167">AfterRegistration</text><polygon fill="#F1F1F1" points="136.75,249.4688,221.75,249.4688,233.75,262.2734,221.75,275.0781,136.75,275.0781,124.75,262.2734,136.75,249.4688" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="64" x="136.75" y="259.6792">Check user</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="136.75" y="272.4839">email existing?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="104.75" y="259.6792">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="233.75" y="259.6792">no</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="23" y="285.0781"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="130" x="33" y="306.2168">Update user code to</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="78" x="33" y="320.1855">the new one</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="135" x="193" y="285.0781"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="115" x="203" y="306.2168">Create a new user</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="62" x="203" y="320.1855">with email</text><polygon fill="#F1F1F1" points="179.25,339.0156,191.25,351.0156,179.25,363.0156,167.25,351.0156,179.25,339.0156" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="179.25" cy="406.0156" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="179.25" cy="406.0156" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="179.25" x2="179.25" y1="67.2969" y2="87.2969"/><polygon fill="#181818" points="175.25,77.2969,179.25,87.2969,183.25,77.2969,179.25,81.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="179.25" x2="179.25" y1="135.2344" y2="155.2344"/><polygon fill="#181818" points="175.25,145.2344,179.25,155.2344,183.25,145.2344,179.25,149.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="124.75" x2="98" y1="262.2734" y2="262.2734"/><line style="stroke:#181818;stroke-width:1.0;" x1="98" x2="98" y1="262.2734" y2="285.0781"/><polygon fill="#181818" points="94,275.0781,98,285.0781,102,275.0781,98,279.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="233.75" x2="260.5" y1="262.2734" y2="262.2734"/><line style="stroke:#181818;stroke-width:1.0;" x1="260.5" x2="260.5" y1="262.2734" y2="285.0781"/><polygon fill="#181818" points="256.5,275.0781,260.5,285.0781,264.5,275.0781,260.5,279.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="98" x2="98" y1="333.0156" y2="351.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="98" x2="167.25" y1="351.0156" y2="351.0156"/><polygon fill="#181818" points="157.25,347.0156,167.25,351.0156,157.25,355.0156,161.25,351.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="260.5" x2="260.5" y1="333.0156" y2="351.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="260.5" x2="191.25" y1="351.0156" y2="351.0156"/><polygon fill="#181818" points="201.25,347.0156,191.25,351.0156,201.25,355.0156,197.25,351.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="179.25" x2="179.25" y1="203.1719" y2="249.4688"/><polygon fill="#181818" points="175.25,239.4688,179.25,249.4688,183.25,239.4688,179.25,243.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="179.25" x2="179.25" y1="363.0156" y2="395.0156"/><polygon fill="#181818" points="175.25,385.0156,179.25,395.0156,183.25,385.0156,179.25,389.0156" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[575abcb528d345a3e815d9631b8d6a2d]
@startuml user_regitration
title User registration flow
start
:User who completed 
registration on Kratos UI;
:Kratos server will send a webhook 
to **api-one**;
partition "**webhook** AfterRegistration" {
    if (Check user \nemail existing?) is (yes) then
        :Update user code to 
        the new one;
    else (no)
    :Create a new user 
    with email;
    endif
}
stop
@enduml

PlantUML version 1.2022.5(Sat Apr 30 10:55:52 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>